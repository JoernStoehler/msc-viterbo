# thesis/CLAUDE.md

Thesis LaTeX source.

## Structure

```
thesis/
  main.tex              # Document root
  preamble.tex          # Packages and macros
  notation-glossary.md  # Notation choices reference
  references.bib        # Bibliography
  includeonly.tex.example # Copyable template for faster draft builds
  
  chapters/
    intro.tex           # Introduction
    math.tex            # Core mathematical definitions
    algorithms.tex      # Algorithm descriptions
    experiments.tex     # Experiment summaries
    counterexample.tex  # HK-O counterexample analysis
    conjectures.tex     # New conjectures from computational probing
    appendix-*.tex      # Appendices (ai-agents, detailed-experiments, lean, literature, research-ledger, rust)

  assets/
    <label>/            # Figures from experiments (generated by experiments/)
    algorithm_inventory/ # Algorithm comparison tables
    manual/             # Hand-created diagrams
    html/               # CSS for ar5iv HTML output
    latexml/            # LaTeXML bindings for ar5iv HTML output
```

## Commands

```bash
cd thesis/

scripts/build.sh              # Full build (PDF + HTML)
scripts/build.sh --pdf-only   # PDF only
scripts/build.sh --html-only  # HTML only
scripts/lint.sh               # chktex + draft compile + latexml sanity
scripts/format.sh             # Format LaTeX files
scripts/serve.sh              # Watch mode for live preview
```

**Draft speedup:** Use `includeonly.tex` (copy from `includeonly.tex.example`)

## LaTeX Style

- **Inline math**: `\(...\)` not `$...$`
- **Display math**: `\[...\]` not `$$...$$`
- **Proofs**: Use `proof` environment
- **Labels**: Theorems, lemmas, equations - label consistently
- **Cross-references**: Use `\ref{}` not hardcoded numbers; use `\eqref{}` for equations
- **Custom macros**: Define in preamble, not inline (e.g., `\newcommand{\Sp}{\operatorname{Sp}}`)
- **arXiv-friendly packages only**

## Work-in-Progress Markers

- Use `\edit{...}` or `% TODO: ...` for incomplete sections
- Use `% [proposed]` for sections that have not been reviewed by Jörn yet. Only Jörn removes these markers
- Remove all WIP markers before final submission

## Writing Style

**Audience:**
- Factual readership of the thesis pdf: Jörn and advisors: Kai Cieliebak (pure symplectic geometry), Elizabeth Gaar (combinatorial optimization).
- Targeted imaginary audience: MSc math students who took the basic symplectic geometry lectures
- Code developers: Claude agents with broad knowledge of symplectic geometry, optimization, algorithms, interested in coding-relevant details and in correctness proofs.

**Goals:** Correctness > Clarity > Conciseness

**Conventions:**
- All definitions, lemmas and proofs must be precise and specific, clearly written, and complete to be verifiable.
- Write self-contained, skimmable, spoilers up front. Avoid forcing reader to jump around.
- Move text that is not part of the main thesis narrative to appendices.
- (Re-)State precise statements before proofs.
- For complex definitions, lemmas and proofs, provide the motivation/strategy, to make them easier to understand and keep in working memory.
- Define notation when first used; note deviations from literature, especially from the main papers (e.g., HK2017).
