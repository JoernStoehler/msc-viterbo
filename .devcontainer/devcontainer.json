{
  // Devcontainer definition for msc-viterbo.
  // Maintenance notes:
  // - Keep this file aligned with .devcontainer/Dockerfile; any new toolchain
  //   should first be baked into the image, then referenced here.
  // - Bind mounts are the canonical way to persist caches (uv, gh auth, agentx
  //   DB, worktrees). When you extend the environment, describe new mounts in
  //   this block so agents know what host paths they manipulate.
  // - postCreateCommand only wires scripts/devcontainer-post-create.sh; edit
  //   that script (with comments) when adding multi-step setup.
  "name": "msc-viterbo",
  "dockerFile": "Dockerfile",
  "workspaceFolder": "/workspaces/msc-viterbo",
  "updateRemoteUserUID": true,
  "features": {},
  "postCreateCommand": "bash scripts/devcontainer-post-create.sh",
  "containerEnv": {
    "LOCAL_DEVCONTAINER": "true",
    "HISTFILE": "/home/vscode/.bash_history_dir/.bash_history"
  },
  // Bind mounts: host paths -> container paths. Adjust host prefixes in
  // scripts/devcontainer-post-create.sh if your machine differs.
  "mounts": [
    "source=/srv/devhome/.codex,target=/home/vscode/.codex,type=bind,consistency=cached",
    "source=/srv/devhome/.config/gh,target=/home/vscode/.config/gh,type=bind,consistency=cached",
    "source=/srv/devhome/.cache/uv,target=/home/vscode/.cache/uv,type=bind,consistency=cached",
    "source=/srv/devhome/.bash_history_dir,target=/home/vscode/.bash_history_dir,type=bind,consistency=cached",
    "source=/srv/devhome/.lake,target=/home/vscode/.lake,type=bind,consistency=cached",
    "source=/srv/devworktrees/msc-viterbo/worktrees,target=/workspaces/worktrees,type=bind,consistency=cached"
  ],
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash"
      },
      "extensions": [
        // python
        "ms-python.python",
        "charliermarsh.ruff",
        ////"ms-toolsai.jupyter",
        "ms-python.vscode-pylance",
        // rust
        "rust-lang.rust-analyzer",
        "vadimcn.vscode-lldb",
        // lean4
        "leanprover.lean4",
        // javascript, typescript
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        ////"vitest.explorer",
        // other file formats
        "tamasfe.even-better-toml",
        "redhat.vscode-yaml",
        // ai
        "openai.chatgpt",
        ////"Anthropic.claude-code",
        ////"google.gemini-cli-vscode-ide-companion",
        ////"google.geminicodeassist",
        "GitHub.copilot",
        "GitHub.copilot-chat",
        ////"ms-vscode.vscode-websearchforcopilot",
        // github
        ////"github.vscode-github-actions",
        "GitHub.vscode-pull-request-github",
        // markdown
        ////"bierner.github-markdown-preview",
        ////"goessner.mdmath",
        ////"artakase.katex-math",
        // UI
        "usernamehw.errorlens",
        "GitHub.github-vscode-theme",
        "miguelsolorio.symbols"
        ////"tomoki1207.pdf"
      ]
    }
  }
}
