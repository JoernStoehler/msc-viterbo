{
  // Local devcontainer for msc-viterbo (Jörn's Ubuntu desktop).
  // PRIMARY ENVIRONMENT.
  //
  // WHY SEPARATE FROM CODESPACE CONFIG:
  // devcontainer spec doesn't support conditionals. Local needs bind mounts
  // for cache persistence; Codespace can't have them. Explicit separation
  // is clearer than trying to share configs with workarounds.
  //
  // Features:
  // - Bind mounts for cache persistence (uv, sccache, TeX)
  // - Bind mounts for OAuth persistence (gh, claude)
  // - Manual git worktrees via /workspaces/worktrees/
  // - Full TexLive installation for PDF builds
  //
  // Prerequisites on host:
  // - /srv/devhome/ directories exist
  // - /srv/devworktrees/msc-viterbo/worktrees/ exists
  // - devcontainer CLI: npm i -g @devcontainers/cli
  //
  // Usage from host:
  //   .devcontainer/local/host-devcontainer-rebuild.sh
  //   .devcontainer/local/host-vscode-tunnel.sh
  "name": "msc-viterbo-local",
  "dockerFile": "Dockerfile",
  "workspaceFolder": "/workspaces/msc-viterbo",
  "updateRemoteUserUID": true,
  "features": {},
  "postCreateCommand": "bash .devcontainer/scripts/post-create.sh",
  "containerEnv": {
    "DEVCONTAINER_ENV": "local",
    "HISTFILE": "/home/vscode/.bash_history_dir/.bash_history",
    "CARGO_TARGET_DIR": "/workspaces/worktrees/shared/target"
  },
  // Bind mounts: Jörn's specific host paths for cache persistence.
  "mounts": [
    "source=/srv/devhome/.claude,target=/home/vscode/.claude,type=bind,consistency=cached",
    "source=/srv/devhome/.config/gh,target=/home/vscode/.config/gh,type=bind,consistency=cached",
    "source=/srv/devhome/.cache/uv,target=/home/vscode/.cache/uv,type=bind,consistency=cached",
    "source=/srv/devhome/.cache/sccache,target=/home/vscode/.cache/sccache,type=bind,consistency=cached",
    "source=/srv/devhome/.texlive2023,target=/home/vscode/.texlive2023,type=bind,consistency=cached",
    "source=/srv/devhome/.texmf-var,target=/home/vscode/.texmf-var,type=bind,consistency=cached",
    "source=/srv/devhome/.texmf-config,target=/home/vscode/.texmf-config,type=bind,consistency=cached",
    "source=/srv/devhome/.bash_history_dir,target=/home/vscode/.bash_history_dir,type=bind,consistency=cached",
    "source=/srv/devworktrees/msc-viterbo/worktrees,target=/workspaces/worktrees,type=bind,consistency=cached"
  ]
}
