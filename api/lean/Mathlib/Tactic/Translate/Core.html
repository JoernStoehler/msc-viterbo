<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.Translate.Core</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.Translate.Core";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">Core</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init.html">Init</a></li><li><a href="../../.././Batteries/Tactic/Trans.html">Batteries.Tactic.Trans</a></li><li><a href="../../.././Lean/Compiler/NoncomputableAttr.html">Lean.Compiler.NoncomputableAttr</a></li><li><a href="../../.././Mathlib/Lean/Name.html">Mathlib.Lean.Name</a></li><li><a href="../../.././Mathlib/Tactic/Eqns.html">Mathlib.Tactic.Eqns</a></li><li><a href="../../.././Lean/Elab/Tactic/Ext.html">Lean.Elab.Tactic.Ext</a></li><li><a href="../../.././Lean/Meta/Tactic/Rfl.html">Lean.Meta.Tactic.Rfl</a></li><li><a href="../../.././Lean/Meta/Tactic/Symm.html">Lean.Meta.Tactic.Symm</a></li><li><a href="../../.././Mathlib/Data/Array/Defs.html">Mathlib.Data.Array.Defs</a></li><li><a href="../../.././Mathlib/Data/Nat/Notation.html">Mathlib.Data.Nat.Notation</a></li><li><a href="../../.././Mathlib/Lean/Expr/ReplaceRec.html">Mathlib.Lean.Expr.ReplaceRec</a></li><li><a href="../../.././Mathlib/Lean/Meta/Simp.html">Mathlib.Lean.Meta.Simp</a></li><li><a href="../../.././Mathlib/Tactic/Simps/Basic.html">Mathlib.Tactic.Simps.Basic</a></li><li><a href="../../.././Mathlib/Tactic/Translate/GuessName.html">Mathlib.Tactic.Translate.GuessName</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.Translate.Core" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.attrOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">attrOption</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.reorderOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">reorderOption</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.relevantArgOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">relevantArgOption</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.dontTranslateOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">dontTranslateOption</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.bracketedOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">bracketedOption</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.existingNameHint"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">existingNameHint</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.attrArgs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">attrArgs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.translate_change_numeral"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">translate_change_numeral</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.linter.existingAttributeWarning"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">linter</span>.<span class="name">existingAttributeWarning</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.linter.translateGenerateName"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">linter</span>.<span class="name">translateGenerateName</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.linter.translateExisting"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">linter</span>.<span class="name">translateExisting</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.changeNumeralAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">changeNumeralAttr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.TranslateData"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">TranslateData</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.findTranslation?"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findTranslation?</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.findPrefixTranslation"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findPrefixTranslation</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.insertTranslation"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">insertTranslation</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.ArgInfo"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">ArgInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.insertTranslationAndInfo"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">insertTranslationAndInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.Config"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">Config</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.instReprConfig"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">instReprConfig</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.instReprConfig.repr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">instReprConfig</span>.<span class="name">repr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.etaExpandN"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">etaExpandN</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.expand"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">expand</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.shouldTranslate"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">shouldTranslate</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.List.swapFirstTwo"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">List</span>.<span class="name">swapFirstTwo</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.changeNumeral"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">changeNumeral</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.applyReplacementFun"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyReplacementFun</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.applyReplacementFun.aux"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyReplacementFun</span>.<span class="name">aux</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.renameBinderNames"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">renameBinderNames</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.reorderForall"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">reorderForall</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.reorderLambda"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">reorderLambda</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.applyReplacementForall"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyReplacementForall</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.applyReplacementLambda"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyReplacementLambda</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.declUnfoldAuxLemmas"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">declUnfoldAuxLemmas</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.getDontTranslates"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">getDontTranslates</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.updateDecl"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">updateDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.declAbstractNestedProofs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">declAbstractNestedProofs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.findTargetName"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findTargetName</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.findAuxDecls"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findAuxDecls</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.transformDeclAux"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">transformDeclAux</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.copyInstanceAttribute"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">copyInstanceAttribute</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.warnAttrCore"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">warnAttrCore</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.warnAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">warnAttr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.warnParametricAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">warnParametricAttr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.translateLemmas"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">translateLemmas</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.findRelevantArg"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findRelevantArg</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.targetName"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">targetName</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.proceedFieldsAux"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">proceedFieldsAux</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.proceedFields"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">proceedFields</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.elabTranslationAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">elabTranslationAttr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.applyAttributes"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyAttributes</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.copyMetaData"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">copyMetaData</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.transformDecl"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">transformDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.checkExistingType"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">checkExistingType</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.Translate.addTranslationAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">addTranslationAttr</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="The-translation-attribute">The translation attribute. <a class="hover-link" href="#The-translation-attribute">#</a></h1><p>Implementation of the translation attribute. This is used for <code>@[to_additive]</code> and <code>@[to_dual]</code>.
See the docstring of <code>to_additive</code> for more information</p></div><div class="decl" id="Mathlib.Tactic.Translate.attrOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L33-L39">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.attrOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">attrOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code>(attr := ...)</code> applies the given attributes to the original and the translated declaration.
In the case of <code>to_additive</code>, we may want to apply it multiple times,
(such as in <code>a ^ n</code> -&gt; <code>n • a</code> -&gt; <code>n +ᵥ a</code>). In this case, you should use the syntax
<code>to_additive (attr := some_other_attr, to_additive)</code>, which will apply <code>some_other_attr</code> to all
three generated declarations.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.attrOption" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.reorderOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L40-L47">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.reorderOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">reorderOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code>(reorder := ...)</code> reorders the arguments/hypotheses in the generated declaration.
It uses cycle notation. For example <code>(reorder := 1 2, 5 6)</code> swaps the first two
arguments with each other and the fifth and the sixth argument and <code>(reorder := 3 4 5)</code> will move
the fifth argument before the third argument. This is used in <code>to_dual</code> to swap the arguments in
<code>≤</code>, <code>&lt;</code> and <code>⟶</code>. It is also used in <code>to_additive</code> to translate from <code>^</code> to <code>•</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.reorderOption" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.relevantArgOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L48-L68">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.relevantArgOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">relevantArgOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>the <code>(relevant_arg := ...)</code> option tells which argument to look at to determine whether to
translate this constant. This is inferred automatically using the function <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findRelevantArg">findRelevantArg</a></code>,
but it can also be overwritten using this syntax.</p><p>If there are multiple possible arguments, we typically tag the first one.
If this argument contains a fixed type, this declaration will not be translated.
See the Heuristics section of the <code>to_additive</code> doc-string for more details.</p><p>If a declaration is not tagged, it is presumed that the first argument is relevant.</p><p>To indicate that there is no relevant argument, set it to a number that is out of bounds,
i.e. larger than the number of arguments, e.g. <code>(relevant_arg := 100)</code>.</p><p>Implementation note: we only allow exactly 1 relevant argument, even though some declarations
(like <code>Prod.instGroup</code>) have multiple relevant argument.
The reason is that whether we translate a declaration is an all-or-nothing decision, and
we will not be able to translate declarations that (e.g.) talk about multiplication on <code>ℕ × α</code>
anyway.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.relevantArgOption" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.dontTranslateOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L69-L77">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.dontTranslateOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">dontTranslateOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code>(dont_translate := ...)</code> takes a list of type variables (separated by spaces) that should not be
considered for translation. For example in</p><pre><code><a href="../../.././Mathlib/Tactic/Lemma.html#lemma">lemma</a> foo {α β : Type} [Group α] [Group β] (a : α) (b : β) : a * a⁻¹ = 1 ↔ b * b⁻¹ = 1
</code></pre><p>we can choose to only translate <code>α</code> by writing <code>to_additive (dont_translate := β)</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.dontTranslateOption" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.bracketedOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L78-L79">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.bracketedOption"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">bracketedOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.bracketedOption" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.existingNameHint"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L80-L81">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.existingNameHint"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">existingNameHint</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A hint for where to find the translated declaration (<code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.existing">existing</a></code> or <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.self">self</a></code>)</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.existingNameHint" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.attrArgs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L82-L83">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.attrArgs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">attrArgs</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.attrArgs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.translate_change_numeral"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L88-L101">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.translate_change_numeral"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">translate_change_numeral</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>An attribute that stores all the declarations that deal with numeric literals on variable types.</p><p>Numeral literals occur in expressions without type information, so in order to decide whether <code>1</code>
needs to be changed to <code>0</code>, the context around the numeral is relevant.
Most numerals will be in an <code><a href="../../.././Init/Prelude.html#OfNat.ofNat">OfNat.ofNat</a></code> application, though tactics can add numeral literals
inside arbitrary functions. By default we assume that we do not change numerals, unless it is
in a function application with the <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.translate_change_numeral">translate_change_numeral</a></code> attribute.</p><p><code>@[translate_change_numeral n₁ ...]</code> should be added to all functions that take one or more
numerals as argument that should be changed if <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.shouldTranslate">shouldTranslate</a></code> succeeds on the first argument,
i.e. when the numeral is only translated if the first argument is a variable
(or consists of variables).
The arguments <code>n₁ ...</code> are the positions of the numeral arguments (starting counting from 1).</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.translate_change_numeral" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.linter.existingAttributeWarning"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L106-L111">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.linter.existingAttributeWarning"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">linter</span>.<span class="name">existingAttributeWarning</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Linter, mostly used by translate attributes, that checks that the source declaration doesn't
have certain attributes</p></div></div><div class="decl" id="Mathlib.Tactic.Translate.linter.translateGenerateName"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L113-L118">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.linter.translateGenerateName"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">linter</span>.<span class="name">translateGenerateName</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Linter used by translate attributes that checks if the given declaration name is
equal to the automatically generated name</p></div></div><div class="decl" id="Mathlib.Tactic.Translate.linter.translateExisting"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L120-L125">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.linter.translateExisting"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">linter</span>.<span class="name">translateExisting</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Linter to check whether the user correctly specified that the translated declaration already
exists</p></div></div><div class="decl" id="Mathlib.Tactic.Translate.changeNumeralAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L127-L136">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.changeNumeralAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">changeNumeralAttr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Batteries/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span></div></div><p>An attribute that stores all the declarations that deal with numeric literals on variable types.</p><p>Numeral literals occur in expressions without type information, so in order to decide whether <code>1</code>
needs to be changed to <code>0</code>, the context around the numeral is relevant.
Most numerals will be in an <code><a href="../../.././Init/Prelude.html#OfNat.ofNat">OfNat.ofNat</a></code> application, though tactics can add numeral literals
inside arbitrary functions. By default we assume that we do not change numerals, unless it is
in a function application with the <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.translate_change_numeral">translate_change_numeral</a></code> attribute.</p><p><code>@[translate_change_numeral n₁ ...]</code> should be added to all functions that take one or more
numerals as argument that should be changed if <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.shouldTranslate">shouldTranslate</a></code> succeeds on the first argument,
i.e. when the numeral is only translated if the first argument is a variable
(or consists of variables).
The arguments <code>n₁ ...</code> are the positions of the numeral arguments (starting counting from 1).</p></div></div><div class="decl" id="Mathlib.Tactic.Translate.TranslateData"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L138-L166">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">TranslateData</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a></code> is a structure that holds all data required for a translation attribute.</p><ul class="structure_fields" id="Mathlib.Tactic.Translate.TranslateData.mk"><li id="Mathlib.Tactic.Translate.TranslateData.ignoreArgsAttr" class="structure_field"><div class="structure_field_info">ignoreArgsAttr : <span class="fn"><a href="../../.././Batteries/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span></div><div class="structure_field_doc"><p>An attribute that tells that certain arguments of this definition are not
involved when translating.
This helps the translation heuristic by also transforming definitions if <code>ℕ</code> or another
fixed type occurs as one of these arguments.</p></div></li><li id="Mathlib.Tactic.Translate.TranslateData.reorderAttr" class="structure_field"><div class="structure_field_info">reorderAttr : <span class="fn"><a href="../../.././Batteries/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span>)</span></span></div><div class="structure_field_doc"><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData.reorderAttr">reorderAttr</a></code> stores the declarations that need their arguments reordered when translating.
This is specified using the <code>(reorder := ...)</code> syntax.</p></div></li><li id="Mathlib.Tactic.Translate.TranslateData.relevantArgAttr" class="structure_field"><div class="structure_field_info">relevantArgAttr : <span class="fn"><a href="../../.././Batteries/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span></div><div class="structure_field_doc"><p>the <code>(relevant_arg := ...)</code> option tells which argument to look at to determine whether to
translate this constant. This is inferred automatically using the function <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findRelevantArg">findRelevantArg</a></code>,
but it can also be overwritten using this syntax.</p><p>If there are multiple possible arguments, we typically tag the first one.
If this argument contains a fixed type, this declaration will not be translated.
See the Heuristics section of the <code>to_additive</code> doc-string for more details.</p><p>If a declaration is not tagged, it is presumed that the first argument is relevant.</p><p>To indicate that there is no relevant argument, set it to a number that is out of bounds,
i.e. larger than the number of arguments, e.g. <code>(relevant_arg := 100)</code>.</p><p>Implementation note: we only allow exactly 1 relevant argument, even though some declarations
(like <code>Prod.instGroup</code>) have multiple relevant argument.
The reason is that whether we translate a declaration is an all-or-nothing decision, and
we will not be able to translate declarations that (e.g.) talk about multiplication on <code>ℕ × α</code>
anyway.</p></div></li><li id="Mathlib.Tactic.Translate.TranslateData.dontTranslateAttr" class="structure_field"><div class="structure_field_info">dontTranslateAttr : <span class="fn"><a href="../../.././Batteries/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div><div class="structure_field_doc"><p>The global <code>dont_translate</code> attribute specifies that operations on the given type
should not be translated. This can be either for types that are translated,
such as <code>MonoidAlgebra</code> -&gt; <code>AddMonoidAlgebra</code>, or for fixed types, such as <code><a href="../../.././Init/Prelude.html#Fin">Fin</a> n</code>/<code>ZMod n</code>.</p><p>Note: The name generation is not aware that the operations on this type should not be translated,
so you generally have to specify a name manually, if some part should not be translated.</p></div></li><li id="Mathlib.Tactic.Translate.TranslateData.translations" class="structure_field"><div class="structure_field_info">translations : <span class="fn"><a href="../../.././Batteries/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></div><div class="structure_field_doc"><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData.translations">translations</a></code> stores all of the constants that have been tagged with this attribute,
and maps them to their translation.</p></div></li><li id="Mathlib.Tactic.Translate.TranslateData.attrName" class="structure_field"><div class="structure_field_info">attrName : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></div><div class="structure_field_doc"><p>The name of the attribute, for example <code>to_additive</code> or <code>to_dual</code>.</p></div></li><li id="Mathlib.Tactic.Translate.TranslateData.changeNumeral" class="structure_field"><div class="structure_field_info">changeNumeral : <a href="../../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>If <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData.changeNumeral">changeNumeral</a> := true</code>, then try to translate the number <code>1</code> to <code>0</code>.</p></div></li><li id="Mathlib.Tactic.Translate.TranslateData.isDual" class="structure_field"><div class="structure_field_info">isDual : <a href="../../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>When <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData.isDual">isDual</a> := true</code>, every translation <code>A → B</code> will also give a translation <code>B → A</code>.</p></div></li><li id="Mathlib.Tactic.Translate.TranslateData.guessNameData" class="structure_field"><div class="structure_field_info">guessNameData : <a href="../../.././Mathlib/Tactic/Translate/GuessName.html#Mathlib.Tactic.GuessName.GuessNameData">GuessName.GuessNameData</a></div><div class="structure_field_doc"><p>The data that is required to guess the name of a translation.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.Translate.TranslateData" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.findTranslation?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L171-L173">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findTranslation?"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findTranslation?</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">env</span> : <a href="../../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></span></div></div><p>Get the translation for the given name.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findTranslation?">Mathlib.Tactic.Translate.findTranslation?</a> <span class="fn">env</span> <span class="fn">t</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">(<a href="../../.././Lean/EnvExtension.html#Lean.SimplePersistentEnvExtension.getState">Lean.SimplePersistentEnvExtension.getState</a> <span class="fn"><span class="fn">t</span>.<a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData.translations">translations</a></span> <span class="fn">env</span>)</span>.<a href="../../.././Lean/Data/NameMap/Basic.html#Lean.NameMap.find?">find?</a></span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.findTranslation?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.findPrefixTranslation"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L175-L179">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findPrefixTranslation"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findPrefixTranslation</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">env</span> : <a href="../../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">nm</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></div></div><p>Get the translation for the given name,
falling back to translating a prefix of the name if the full name can't be translated.
This allows translating automatically generated declarations such as <code>IsRegular.casesOn</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findPrefixTranslation">Mathlib.Tactic.Translate.findPrefixTranslation</a> <span class="fn">env</span> <span class="fn">nm</span> <span class="fn">t</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mathlib/Lean/Expr/Basic.html#Lean.Name.mapPrefix">Lean.Name.mapPrefix</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findTranslation?">Mathlib.Tactic.Translate.findTranslation?</a> <span class="fn">env</span> <span class="fn">t</span>)</span> <span class="fn">nm</span></span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.findPrefixTranslation" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.insertTranslation"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L181-L200">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.insertTranslation"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">insertTranslation</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">failIfExists</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Add a name translation to the translations map.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.insertTranslation" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.ArgInfo"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L202-L207">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">ArgInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo">ArgInfo</a></code> stores information about how a constant should be translated.</p><ul class="structure_fields" id="Mathlib.Tactic.Translate.ArgInfo.mk"><li id="Mathlib.Tactic.Translate.ArgInfo.reorder" class="structure_field"><div class="structure_field_info">reorder : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span></div><div class="structure_field_doc"><p>The arguments that should be reordered when translating, using cycle notation.</p></div></li><li id="Mathlib.Tactic.Translate.ArgInfo.relevantArg" class="structure_field"><div class="structure_field_info">relevantArg : <a href="../../.././Init/Prelude.html#Nat">ℕ</a></div><div class="structure_field_doc"><p>The argument used to determine whether this constant should be translated.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.Translate.ArgInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.insertTranslationAndInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L209-L218">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.insertTranslationAndInfo"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">insertTranslationAndInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">argInfo</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo">ArgInfo</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">failIfExists</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Add a name translation to the translations map and add the <code>argInfo</code> information to <code>src</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.insertTranslationAndInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.Config"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L220-L255">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">Config</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a></code> is the type of the arguments that can be provided to <code>to_additive</code>.</p><ul class="structure_fields" id="Mathlib.Tactic.Translate.Config.mk"><li id="Mathlib.Tactic.Translate.Config.trace" class="structure_field"><div class="structure_field_info">trace : <a href="../../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>View the trace of the translation procedure.
Equivalent to <code>set_option trace.translate true</code>.</p></div></li><li id="Mathlib.Tactic.Translate.Config.tgt" class="structure_field"><div class="structure_field_info">tgt : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></div><div class="structure_field_doc"><p>The given name of the target.</p></div></li><li id="Mathlib.Tactic.Translate.Config.doc" class="structure_field"><div class="structure_field_info">doc : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#String">String</a></span></div><div class="structure_field_doc"><p>An optional doc string.</p></div></li><li id="Mathlib.Tactic.Translate.Config.allowAutoName" class="structure_field"><div class="structure_field_info">allowAutoName : <a href="../../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>If <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.allowAutoName">allowAutoName</a></code> is <code>false</code> (default) then
we check whether the given name can be auto-generated.</p></div></li><li id="Mathlib.Tactic.Translate.Config.reorder" class="structure_field"><div class="structure_field_info">reorder : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span></div><div class="structure_field_doc"><p>The arguments that should be reordered when translating, using cycle notation.</p></div></li><li id="Mathlib.Tactic.Translate.Config.relevantArg?" class="structure_field"><div class="structure_field_info">relevantArg? : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span></div><div class="structure_field_doc"><p>The argument used to determine whether this constant should be translated.</p></div></li><li id="Mathlib.Tactic.Translate.Config.attrs" class="structure_field"><div class="structure_field_info">attrs : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></div><div class="structure_field_doc"><p>The attributes which we want to give to the original and translated declaration.
For <code>simps</code> this will also add generated lemmas to the translation dictionary.</p></div></li><li id="Mathlib.Tactic.Translate.Config.dontTranslate" class="structure_field"><div class="structure_field_info">dontTranslate : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Ident">Lean.Ident</a></span></div><div class="structure_field_doc"><p>A list of type variables that should not be translated.</p></div></li><li id="Mathlib.Tactic.Translate.Config.ref" class="structure_field"><div class="structure_field_info">ref : <a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div><div class="structure_field_doc"><p>The <code>Syntax</code> element corresponding to the translation attribute,
which we need for adding definition ranges, and for logging messages.</p></div></li><li id="Mathlib.Tactic.Translate.Config.existing" class="structure_field"><div class="structure_field_info">existing : <a href="../../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>An optional flag stating that the translated declaration already exists.
If this flag is wrong about whether the translated declaration exists, we raise a linter error.
Note: the linter will never raise an error for inductive types and structures.</p></div></li><li id="Mathlib.Tactic.Translate.Config.self" class="structure_field"><div class="structure_field_info">self : <a href="../../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>An optional flag stating that the target of the translation is the target itself.
This can be used to reorder arguments, such as in
<code>attribute [to_dual <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.self">self</a> (reorder := 3 4)] <a href="../../.././Init/Prelude.html#LE.le">LE.le</a></code>.
It can also be used to give a hint to <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.shouldTranslate">shouldTranslate</a></code>, such as in
<code>attribute [to_additive self] <a href="../../.././Init/Prelude.html#Unit">Unit</a></code>.
If <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.self">self</a> := true</code>, we should also have <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.existing">existing</a> := true</code>.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.Translate.Config" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.instReprConfig"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L255-L255">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.instReprConfig"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">instReprConfig</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.instReprConfig">Mathlib.Tactic.Translate.instReprConfig</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Data/Repr.html#Repr.mk">{</a> <span class="fn">reprPrec</span> := <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.instReprConfig.repr">Mathlib.Tactic.Translate.instReprConfig.repr</a> <a href="../../.././Init/Data/Repr.html#Repr.mk">}</a></li></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.instReprConfig.repr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L255-L255">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.instReprConfig.repr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">instReprConfig</span>.<span class="name">repr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../../.././Init/Data/Format/Basic.html#Std.Format">Std.Format</a></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.instReprConfig.repr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.etaExpandN"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L260-L262">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.etaExpandN"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">etaExpandN</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Eta expands <code>e</code> at most <code>n</code> times.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.etaExpandN" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.expand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L264-L300">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.expand"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">expand</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p><code>e.<a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.expand">expand</a></code> eta-expands all expressions that have as head a constant <code>n</code> in <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo.reorder">reorder</a></code>.
They are expanded until they are applied to one more argument than the maximum in <code>reorder.find n</code>.
It also expands all kernel projections that have as head a constant <code>n</code> in <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo.reorder">reorder</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.expand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.shouldTranslate"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L343-L352">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.shouldTranslate"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">shouldTranslate</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">env</span> : <a href="../../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dontTranslate</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span> := <a href="../../.././Init/Prelude.html#List.toArray">#[</a><a href="../../.././Init/Prelude.html#List.toArray">]</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> (<a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> <a href="../../.././Init/Core.html#Sum">⊕</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a>)</span></div></div><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.shouldTranslate">shouldTranslate</a> e</code> tests whether the expression <code>e</code> contains a constant
<code>nm</code> that is not applied to any arguments, and such that <code>translations.find?[nm] = none</code>.
This is used for deciding which subexpressions to translate: we only translate
constants if <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.shouldTranslate">shouldTranslate</a></code> applied to their relevant argument returns <code>true</code>.
This means we will replace expression applied to e.g. <code>α</code> or <code>α × β</code>, but not when applied to
e.g. <code>ℕ</code> or <code>ℝ × α</code>.
We ignore all arguments specified by the <code>ignore</code> <code>NameMap</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.shouldTranslate">Mathlib.Tactic.Translate.shouldTranslate</a> <span class="fn">env</span> <span class="fn">t</span> <span class="fn">e</span> <span class="fn">dontTranslate</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.shouldTranslate.unsafe_impl_3">Mathlib.Tactic.Translate.shouldTranslate.unsafe_impl_3</a> <span class="fn">env</span> <span class="fn">t</span> <span class="fn">e</span> <span class="fn">dontTranslate</span></span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.shouldTranslate" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.List.swapFirstTwo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L354-L358">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.List.swapFirstTwo"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">List</span>.<span class="name">swapFirstTwo</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">α</span></span> → <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">α</span></span></span></div></div><p>Swap the first two elements of a list</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.List.swapFirstTwo">Mathlib.Tactic.Translate.List.swapFirstTwo</a> <a href="../../.././Init/Prelude.html#List.nil">[</a><a href="../../.././Init/Prelude.html#List.nil">]</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#List.nil">[</a><a href="../../.././Init/Prelude.html#List.nil">]</a></li><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.List.swapFirstTwo">Mathlib.Tactic.Translate.List.swapFirstTwo</a> <a href="../../.././Init/Prelude.html#List.cons">[</a><span class="fn">x_1</span><a href="../../.././Init/Prelude.html#List.cons">]</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#List.cons">[</a><span class="fn">x_1</span><a href="../../.././Init/Prelude.html#List.cons">]</a></li><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.List.swapFirstTwo">Mathlib.Tactic.Translate.List.swapFirstTwo</a> (<span class="fn">x_1</span> <a href="../../.././Init/Prelude.html#List.cons">::</a> <span class="fn">y</span> <a href="../../.././Init/Prelude.html#List.cons">::</a> <span class="fn">l</span>)</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">y</span> <a href="../../.././Init/Prelude.html#List.cons">::</a> <span class="fn">x_1</span> <a href="../../.././Init/Prelude.html#List.cons">::</a> <span class="fn">l</span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.List.swapFirstTwo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.changeNumeral"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L360-L364">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.changeNumeral"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">changeNumeral</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Change the numeral <code>nat_lit 1</code> to the numeral <code>nat_lit 0</code>.
Leave all other expressions unchanged.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.changeNumeral">Mathlib.Tactic.Translate.changeNumeral</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr.lit">Lean.Expr.lit</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Literal.natVal">Lean.Literal.natVal</a> <span class="fn">1</span>)</span>)</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.mkRawNatLit">Lean.mkRawNatLit</a> <span class="fn">0</span></span></li><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.changeNumeral">Mathlib.Tactic.Translate.changeNumeral</a> <span class="fn">x✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">x✝</span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.changeNumeral" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.applyReplacementFun"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L366-L456">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyReplacementFun"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyReplacementFun</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dontTranslate</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span> := <a href="../../.././Init/Prelude.html#List.toArray">#[</a><a href="../../.././Init/Prelude.html#List.toArray">]</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyReplacementFun">applyReplacementFun</a> e</code> replaces the expression <code>e</code> with its tranlsation.
It translates each identifier (inductive type, defined function etc) in an expression, unless</p><ul>
<li>The identifier occurs in an application with first argument <code>arg</code>; and</li>
<li><code>test arg</code> is false.
However, if <code>f</code> is in the dictionary <code>relevant</code>, then the argument <code>relevant.find f</code>
is tested, instead of the first argument.</li>
</ul><p>It will also reorder arguments of certain functions, using <code>reorderFn</code>:
e.g. <code>g x₁ x₂ x₃ ... xₙ</code> becomes <code>g x₂ x₁ x₃ ... xₙ</code> if <code>reorderFn g = some [1]</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.applyReplacementFun" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.applyReplacementFun.aux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L389-L456">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyReplacementFun.aux"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyReplacementFun</span>.<span class="name">aux</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dontTranslate</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">env</span> : <a href="../../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">trace</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Implementation of <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyReplacementFun">applyReplacementFun</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.applyReplacementFun.aux" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.renameBinderNames"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L458-L462">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.renameBinderNames"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">renameBinderNames</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></div><p>Rename binder names in pi type.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.renameBinderNames" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.reorderForall"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L464-L474">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.reorderForall"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">reorderForall</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">reorder</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Reorder pi-binders. See doc of <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData.reorderAttr">reorderAttr</a></code> for the interpretation of the argument</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.reorderForall" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.reorderLambda"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L476-L489">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.reorderLambda"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">reorderLambda</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">reorder</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Reorder lambda-binders. See doc of <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData.reorderAttr">reorderAttr</a></code> for the interpretation of the argument</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.reorderLambda" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.applyReplacementForall"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L491-L506">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyReplacementForall"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyReplacementForall</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dontTranslate</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Run <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyReplacementFun">applyReplacementFun</a></code> on an expression <code>∀ x₁ .. xₙ, e</code>,
making sure not to translate type-classes on <code>xᵢ</code> if <code>i</code> is in <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.dontTranslate">dontTranslate</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.applyReplacementForall" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.applyReplacementLambda"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L508-L523">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyReplacementLambda"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyReplacementLambda</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dontTranslate</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Run <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyReplacementFun">applyReplacementFun</a></code> on an expression <code>fun x₁ .. xₙ ↦ e</code>,
making sure not to translate type-classes on <code>xᵢ</code> if <code>i</code> is in <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.dontTranslate">dontTranslate</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.applyReplacementLambda" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.declUnfoldAuxLemmas"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L525-L535">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.declUnfoldAuxLemmas"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">declUnfoldAuxLemmas</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">decl</span> : <a href="../../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a></span></div></div><p>Unfold auxlemmas in the type and value.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.declUnfoldAuxLemmas" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.getDontTranslates"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L537-L549">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.getDontTranslates"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">getDontTranslates</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">given</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Ident">Lean.Ident</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span></div></div><p>Given a list of variable local identifiers that shouldn't be translated,
determine the arguments that shouldn't be translated.</p><p>TODO: Currently, this function doesn't deduce any <code>dont_translate</code> types from <code>type</code>.
In the future we would like that the presence of <code>MonoidAlgebra k G</code> will automatically
flag <code>k</code> as a type to not be translated.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.getDontTranslates" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.updateDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L551-L565">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.updateDecl"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">updateDecl</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">srcDecl</span> : <a href="../../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">reorder</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dont</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Ident">Lean.Ident</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a></span></div></div><p>Run applyReplacementFun on the given <code>srcDecl</code> to make a new declaration with name <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.tgt">tgt</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.updateDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.declAbstractNestedProofs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L567-L573">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.declAbstractNestedProofs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">declAbstractNestedProofs</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">decl</span> : <a href="../../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a></span></div></div><p>Abstracts the nested proofs in the value of <code>decl</code> if it is a def.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.declAbstractNestedProofs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.findTargetName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L575-L591">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findTargetName"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findTargetName</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">env</span> : <a href="../../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">pre </span><span class="fn">tgt_pre</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></div></div><p>Find the target name of <code>pre</code> and all created auxiliary declarations.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.findTargetName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.findAuxDecls"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L593-L609">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findAuxDecls"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findAuxDecls</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">pre</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Data/NameMap/Basic.html#Lean.NameSet">Lean.NameSet</a></div></div><p>Returns a <code>NameSet</code> of all auxiliary constants in <code>e</code> that might have been generated
when adding <code>pre</code> to the environment.
Examples include <code>pre.match_5</code> and
<code>_private.Mathlib.MyFile.someOtherNamespace.someOtherDeclaration._eq_2</code>.
The last two examples may or may not have been generated by this declaration.
The last example may or may not be the equation lemma of a declaration with a translation attribute.
We will only translate it if it has a translation attribute.</p><p>Note that this function would return <code>proof_nnn</code> aux lemmas if
we hadn't unfolded them in <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.declUnfoldAuxLemmas">declUnfoldAuxLemmas</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.findAuxDecls" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.transformDeclAux"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L611-L716">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.transformDeclAux"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">transformDeclAux</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cfg</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">pre </span><span class="fn">tgt_pre</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></div></div><p>Transform the declaration <code>src</code> and all declarations <code>pre._proof_i</code> occurring in <code>src</code>
using the transforms dictionary.</p><p><code>replace_all</code>, <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.trace">trace</a></code>, <code>ignore</code> and <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo.reorder">reorder</a></code> are configuration options.</p><p><code>pre</code> is the declaration that got the translation attribute and <code>tgt_pre</code> is the target of this
declaration.</p></div></div><div class="decl" id="Mathlib.Tactic.Translate.copyInstanceAttribute"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L718-L725">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.copyInstanceAttribute"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">copyInstanceAttribute</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Copy the instance attribute in a <code>to_additive</code></p><p>[todo] it seems not to work when the <code>to_additive</code> is added as an attribute later.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.copyInstanceAttribute" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.warnAttrCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L727-L739">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.warnAttrCore"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">warnAttrCore</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href="../../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">thisAttr </span><span class="fn">attrName </span><span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Warn the user when the declaration has an attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.warnAttrCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.warnAttr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L741-L744">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.warnAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">warnAttr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">β</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">attr</span> : <span class="fn"><a href="../../.././Lean/ScopedEnvExtension.html#Lean.SimpleScopedEnvExtension">Lean.SimpleScopedEnvExtension</a> <span class="fn">α</span> <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">β</span> → <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">thisAttr </span><span class="fn">attrName </span><span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Warn the user when the declaration has a simple scoped attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.warnAttr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.warnParametricAttr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L746-L749">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.warnParametricAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">warnParametricAttr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">β</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">attr</span> : <span class="fn"><a href="../../.././Lean/Attributes.html#Lean.ParametricAttribute">Lean.ParametricAttribute</a> <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">thisAttr </span><span class="fn">attrName </span><span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Warn the user when the declaration has a parametric attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.warnParametricAttr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.translateLemmas"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L751-L764">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.translateLemmas"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">translateLemmas</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Exception.html#Lean.MonadError">Lean.MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">names</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">argInfo</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo">ArgInfo</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">desc</span> : <a href="../../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">runAttr</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.translateLemmas">translateLemmas</a> names argInfo desc t</code> runs <code>t</code> on all elements of <code>names</code>
and adds translations between the generated lemmas (the output of <code>t</code>).
<code>names</code> must be non-empty.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.translateLemmas" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.findRelevantArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L766-L789">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.findRelevantArg"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">findRelevantArg</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">nm</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span></div></div><p>Find the argument of <code>nm</code> that appears in the first translatable (type-class) argument.
Returns 1 if there are no types with a translatable class as arguments.
E.g. <code>Prod.instGroup</code> returns 1, and <code>Pi.instOne</code> returns 2.
Note: we only consider the relevant argument (<code>(relevant_arg := ...)</code>) of each type-class.
E.g. <code>[Pow A N]</code> is a translatable type-class on <code>A</code>, not on <code>N</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.findRelevantArg" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.targetName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L791-L816">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.targetName"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">targetName</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cfg</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></div></div><p>Return the provided target name or autogenerate one if one was not provided.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.targetName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.proceedFieldsAux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L818-L828">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.proceedFieldsAux"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">proceedFieldsAux</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">argInfo</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo">ArgInfo</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>if <code>f src = #[a_1, ..., a_n]</code> and <code>f <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.tgt">tgt</a> = #[b_1, ... b_n]</code> then <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.proceedFieldsAux">proceedFieldsAux</a> src <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.tgt">tgt</a> f</code>
will insert translations from <code>a_i</code> to <code>b_i</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.proceedFieldsAux" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.proceedFields"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L830-L852">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.proceedFields"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">proceedFields</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">argInfo</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo">ArgInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Add the structure fields of <code>src</code> to the translations dictionary
so that they will be translated correctly.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.proceedFields" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.elabTranslationAttr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L854-L934">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.elabTranslationAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">elabTranslationAttr</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a></span></div></div><p>Elaboration of the configuration options for a translation attribute. It is assumed that</p><ul>
<li><code>stx[0]</code> is the attribute (e.g. <code>to_additive</code>)</li>
<li><code>stx[1]</code> is the optional tracing <code>?</code></li>
<li><code>stx[2]</code> is the remaining <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.attrArgs">attrArgs</a></code></li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.elabTranslationAttr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.applyAttributes"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L937-L1002">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.applyAttributes"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">applyAttributes</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">rawAttrs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">argInfo</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo">ArgInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span></div></div><p>Apply attributes to the original and translated declarations.</p></div></div><div class="decl" id="Mathlib.Tactic.Translate.copyMetaData"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L1004-L1021">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.copyMetaData"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">copyMetaData</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cfg</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">argInfo</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo">ArgInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span></div></div><p>Copies equation lemmas and attributes from <code>src</code> to <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config.tgt">tgt</a></code></p></div></div><div class="decl" id="Mathlib.Tactic.Translate.transformDecl"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L1023-L1030">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.transformDecl"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">transformDecl</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cfg</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">argInfo</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo">ArgInfo</a> := <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo.mk">{</a> <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.ArgInfo.mk">}</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span></div></div><p>Make a new copy of a declaration, replacing fragments of the names of identifiers in the type and
the body using the <code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData.translations">translations</a></code> dictionary.</p></div></div><div class="decl" id="Mathlib.Tactic.Translate.checkExistingType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L1032-L1053">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.checkExistingType"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">checkExistingType</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src </span><span class="fn">tgt</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">reorder</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dont</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Ident">Lean.Ident</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Verify that the type of given <code>srcDecl</code> translates to that of <code>tgtDecl</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.Translate.checkExistingType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.Translate.addTranslationAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/1ccd71f89cbbd82ae7d097723ce1722ca7b01c33/Mathlib/Tactic/Translate/Core.lean#L1055-L1116">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.addTranslationAttr"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Translate</span>.<span class="name">addTranslationAttr</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.TranslateData">TranslateData</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">src</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cfg</span> : <a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.Config">Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">kind</span> : <a href="../../.././Lean/Attributes.html#Lean.AttributeKind">Lean.AttributeKind</a> := <a href="../../.././Lean/Attributes.html#Lean.AttributeKind.global">Lean.AttributeKind.global</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Attributes.html#Lean.AttrM">Lean.AttrM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span></div></div><p><code><a href="../../.././Mathlib/Tactic/Translate/Core.html#Mathlib.Tactic.Translate.addTranslationAttr">addTranslationAttr</a> src cfg</code> adds a translation attribute to <code>src</code> with configuration <code>cfg</code>.
See the attribute implementation for more details.
It returns an array with names of translated declarations (usually 1, but more if there are nested
<code>to_additive</code> calls).</p></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>